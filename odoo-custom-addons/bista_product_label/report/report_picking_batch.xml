<?xml version="1.0" encoding="utf-8"?>
<odoo>
	<data noupdate="0">

		<template id="report_picking_batch_inherit" inherit_id="stock_picking_batch.report_picking_batch">
			<!--<xpath expr="//div[hasclass('d-flex')]" position="attributes">-->
				<!--<attribute name="class"></attribute>-->
				<!--<attribute name="t-attf-style">display: -webkit-box; -webkit-box-orient: horizontal; -webkit-align-items: center; </attribute>-->
			<!--</xpath>-->

			<!-- Transfer name -->
			<xpath expr="//div[hasclass('mr-auto')]/img" position="replace">
				<t t-if="o.get_qr_batch_operations_settings()">
					<div class="ml-4">
						<img t-att-src="'/report/barcode/?type=QR&amp;value=%s&amp;width=150&amp;height=150&amp;humanreadable=1' % o.name"/>
					</div>
				</t>
				<t t-else="">
					<img alt="Barcode" t-att-src="'/report/barcode/?type=%s&amp;value=%s&amp;width=%s&amp;height=%s' % ('Code128', quote_plus(o.name or ''), 600, 150)" style="width:300px;height:50px"/>
				</t>
			</xpath>

			<!-- First Table (Pickings Table) -->
			<xpath expr="//table[1]//thead/tr/th[2]" position="replace">
				<t t-if="o.get_qr_batch_operations_settings()">
					<th>QR</th>
				</t>
				<t t-else="">
					<th>Barcode</th>
				</t>
			</xpath>
			<xpath expr="//table[1]//tbody/tr/td[2]/img" position="replace">
				<t t-if="o.get_qr_batch_operations_settings()">
					<img t-att-src="'/report/barcode/?type=QR&amp;value=%s&amp;width=100&amp;height=100&amp;humanreadable=1' % pick.name" alt="QR Code"/>
				</t>
				<t t-else="">
					<img t-att-src="'/report/barcode/?type=%s&amp;value=%s&amp;width=%s&amp;height=%s&amp;quiet=%s' % ('Code128', pick.name, 400, 100, 0)" style="width:200px;height:50px" alt="Barcode"/>
				</t>
			</xpath>

			<!-- Second Table (Product Table) -->
			<xpath expr="//t[@t-foreach='locations']//table//thead/tr/th[@t-if='has_barcode']/strong" position="replace">
				<t t-if="o.get_qr_batch_operations_settings()">
					<strong>Product QR</strong>
				</t>
				<t t-else="">
					<strong>Product Barcode</strong>
				</t>
			</xpath>
			<xpath expr="//t[@t-foreach='locations']/table//tbody/tr/td[@t-if='has_serial_number']/img" position="replace">
				<t t-if="o.get_qr_batch_operations_settings()">
					<img t-if="move_operation.lot_id or move_operation.lot_name" t-att-src="'/report/barcode/?type=QR&amp;value=%s&amp;width=100&amp;height=100&amp;humanreadable=1' % move_operation.lot_id.name"  alt="QR Code"/>
				</t>
				<t t-else="">
					<img t-if="move_operation.lot_id or move_operation.lot_name" t-att-src="'/report/barcode/?type=%s&amp;value=%s&amp;width=%s&amp;height=%s&amp;humanreadable=1' % ('Code128', move_operation.lot_id.name, 600, 100)" style="width:100%;height:35px;" alt="Barcode"/>
				</t>
			</xpath>
			<xpath expr="//t[@t-foreach='locations']/table//tbody/tr/td[@t-if='has_barcode']/span" position="attributes">
				<attribute name="t-if">move_operation.product_id and move_operation.product_id.barcode and not o.get_qr_batch_operations_settings()</attribute>
			</xpath>
			<xpath expr="//t[@t-foreach='locations']/table//tbody/tr/td[@t-if='has_barcode']/span" position="after">
				<t t-else="">
					<img t-att-src="'/report/barcode/?type=QR&amp;value=%s&amp;width=100&amp;height=100&amp;humanreadable=1' % move_operation.product_id.barcode"/>
				</t>
			</xpath>
		</template>

	</data>
</odoo>