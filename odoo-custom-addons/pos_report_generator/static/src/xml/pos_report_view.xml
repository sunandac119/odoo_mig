<templates>
    <t t-name="PosReport">
        <div class="">
            <div>
                <center>
                    <h1 style="margin: 20px;">Point of Sale Report</h1>
                </center>
            </div>
            <div>
                <div class="filter_view_pr"/>
            </div>
            <div>
                <div class="table_view_pr" style="width: 95%; margin: auto;"/>
            </div>

        </div>
    </t>

    <t t-name="posFilterView">
        <div class="row" style="margin-right: 10px; margin-left: 10px;">
            <div class="sub_container_left" style="width: 285px; margin-left: 36px;">
                <div class="report_print">
                    <button type="button" class="btn btn-primary" id="pdf"
                            style="top: 0px; height: 42px; color: white; background-color: #7c7bad; border-color: #7c7bad; width: 127px;">
                        Print (PDF)
                    </button>
                    <!--button type="button" class="btn btn-primary" id="xlsx"
                            style="top: 0px; height: 42px; color: white; background-color: #7c7bad; border-color: #7c7bad; width: 127px;">
                        Export (XLSX)
                    </button>-->
                </div>
            </div>
            <br></br>

            <div class="sub_container_right row"
                 style="width: 30%; height: 3%; top: 0px; position: relative; display: flex; justify-content: end; margin-bottom: 20px;">


                <div class="form-group">
                    <label class="" for="date_from">Start Date :</label>
                    <div class="input-group date" id="date_from" data-target-input="nearest">
                        <input type="text" name="date_from" class="form-control datetimepicker-input"
                               data-target="#date_from" t-att-name="prefix"/>
                        <div class="input-group-append" data-target="#date_from" data-toggle="datetimepicker">
                            <span class="input-group-text">
                                <span class="fa fa-calendar" role="img" aria-label="Calendar"/>
                            </span>
                        </div>
                    </div>

                    <label class="" for="date_to">End Date :</label>
                    <div class="input-group date" id="date_to" data-target-input="nearest">

                        <input type="text" name="date_to" class="form-control datetimepicker-input"
                               data-target="#date_to" t-att-name="prefix"/>
                        <div class="input-group-append" data-target="#date_to" data-toggle="datetimepicker">
                            <span class="input-group-text">
                                <span class="fa fa-calendar" role="img" aria-label="Calendar"/>
                            </span>
                        </div>
                    </div>

                    <label for="pointofsale_selection">POS</label>
					<select id="pointofsale_selection" class="pointofsale form-control" name="pointofsale[]" style="margin-top:15px" multiple="multiple">
                        <option value="">Select Point Of Sale</option>
                        <t t-foreach="filter_data['pos_configs']" t-as="pos_config">
                            <option t-att-value="pos_config['id']">
                                <t t-esc="pos_config['name']"/>
                            </option>
                        </t>
                    </select>

                </div>


            </div>
                <div class="search-Result-Selection" style="">
                    <a type="button" class="dropdown-toggle report-type" data-toggle="dropdown">
                        <span class="fa fa-book"/>
                        Report Type:
                    </a>
                    <select id="selection" class="dropdown-menu report_type" name="states[]">
                        <div role="separator" class="dropdown-divider"/>
						<option value="report_by_payment">PAYMENT REPORT BY DATE</option>
                        <option value="report_by_order" selected="">Report By Order</option>
                        <option value="report_by_order_detail">Report By Order Detail</option>
                        <option value="report_by_product">Report By Product</option>
                        <option value="report_by_categories">Report By Categories</option>
                        <option value="report_by_salesman">SHORT/OVER BY CASHIER REPORT</option>
                    </select>




                    <span id="report_res"/>
                </div>



                <div style="">
                    <button type="button" id="apply_filter" class="btn btn-primary"
                            style="top: 0px; height: 42px; color: white; background-color: #7c7bad; border-color: #7c7bad; width: 100px;">
                        Apply
                    </button>
                </div>
            
        </div>
    </t>

    <t t-name="PosOrderTable">
        <!--        <t t-esc="order.report_type"/>-->
        <div t-if="order.report_type == 'report_by_order'">
            <div class="table_main_view">
                <table cellspacing="0" width="100%">

                    <thead>
                        <tr class="table_pos_head">
                            <th>PoS</th>
                            <th class="mon_fld">Order</th>
                            <th class="mon_fld">Date Order</th>
                            <th class="mon_fld">Customer</th>
                            <th class="mon_fld">Salesman</th>
                            <th class="mon_fld">Total Qty</th>
                            <th class="mon_fld">Amount Total</th>

                            <th class="mon_fld">Note</th>
                        </tr>
                    </thead>

                    <tbody>
                        <!--                        <t t-if="order['report_type']='report_by_order'">-->
                        <t t-foreach="report_lines" t-as="pos_report">
                            <tr style="border: 1.5px solid black;" class="ps-line"

                                t-att-data-account-id="pos_report['id']"
                                t-attf-data-target=".a{{pos_report['id']}}">
                                <td>
                                    <t t-if="pos_report['id']">
                                        <div class="dropdown dropdown-toggle">
                                            <a data-toggle="dropdown" href="#">
                                                <span class="caret"/>
                                                <span>
                                                    <t t-esc="pos_report['shop']"/>
                                                </span>
                                            </a>
                                            <ul class="dropdown-menu" role="menu" aria-labelledby="dropdownMenu">
                                                <li>
                                                    <a class="view_pos_order" tabindex="-1" href="#"
                                                       t-att-id="pos_report['id']">
                                                        View PoS Order
                                                    </a>
                                                </li>
                                            </ul>
                                        </div>
                                    </t>
                                </td>
                                <td style="text-align:center;">
                                    <span>
                                        <t t-esc="pos_report['session']"/>
                                    </span>
                                </td>
                                <td style="text-align:center;">
                                    <span>
                                        <t t-esc="pos_report['date_order']"/>
                                    </span>
                                </td>
                                <td style="text-align:center;">
                                    <span>
                                        <t t-esc="pos_report['name']"/>
                                    </span>
                                </td>
                                <td style="text-align:center;">
                                    <span>
                                        <t t-esc="pos_report['salesman']"/>
                                    </span>
                                </td>
                                <td style="text-align:center;">
                                    <span>
                                        <t t-esc="pos_report['sum']"/>
                                    </span>
                                </td>
                                <td style="text-align:center;">
                                    <span>
                                        <t t-esc="pos_report['amount_total']"/>
                                    </span>
                                </td>
                                <td style="text-align:center;">
                                    <span>
                                        <t t-esc="pos_report['note']"/>
                                    </span>
                                </td>
                            </tr>
                        </t>
                        <!--                        </t>-->
                        <!--                        Report for order detail-->

                    </tbody>
                </table>
            </div>
        </div>
        <div t-if="order.report_type == 'report_by_order_detail'">
            <div class="table_main_view">
                <table cellspacing="0" width="100%">

                    <thead>
                        <tr class="table_pos_head">
                            <th>PoS</th>
                            <th class="mon_fld">Order</th>
                            <th class="mon_fld">Date Order</th>
                            <th class="mon_fld">Customer</th>
                            <th class="mon_fld">Salesman</th>
                            <th class="mon_fld">Product Code</th>
                            <th class="mon_fld">Product Name</th>
                            <th class="mon_fld">Price unit</th>
                            <th class="mon_fld">Qty</th>
                            <th class="mon_fld">Price Subtotal</th>
                            <th class="mon_fld">Price Subtotal Incl</th>
                        </tr>
                    </thead>

                    <tbody>
                        <!--                        <t t-if="order['report_type']='report_by_order'">-->
                        <t t-foreach="report_lines" t-as="pos_report">
                            <tr style="border: 1.5px solid black;" class="ps-line"
                                data-toggle="collapse"
                                t-att-data-account-id="pos_report['id']"
                                t-attf-data-target=".a{{pos_report['id']}}">
                                <td style="border: 0px solid black;">
                                    <i class="fa fa-caret-down" role="img" aria-label="Unfolded" title="Unfolded"/>

                                    <span>
                                        <t t-esc="pos_report['shop']"/>
                                    </span>


                                </td>
                                <td style="text-align:center;">
                                    <span>
                                        <t t-esc="pos_report['session']"/>
                                    </span>
                                </td>
                                <td style="text-align:center;">
                                    <span>
                                        <t t-esc="pos_report['date_order']"/>
                                    </span>
                                </td>
                                <td style="text-align:center;">
                                    <span>
                                        <t t-esc="pos_report['name']"/>
                                    </span>
                                </td>
                                <td style="text-align:center;">
                                    <span>
                                        <t t-esc="pos_report['salesman']"/>
                                    </span>
                                </td>
                                <td style="text-align:center;">
                                    <span>
                                        <t t-esc="pos_report['default_code']"/>
                                    </span>
                                </td>
                                <td style="text-align:center;">
                                    <span>
                                        <t t-esc="pos_report['full_product_name']"/>
                                    </span>
                                </td>
                                <td style="text-align:center;">
                                    <span>
                                        <t t-esc="pos_report['price_unit']"/>
                                    </span>
                                </td>

                                <td style="text-align:center;">
                                    <span>
                                        <t t-esc="pos_report['sum']"/>
                                    </span>
                                </td>
                                <td style="text-align:center;">
                                    <span>
                                        <t t-esc="pos_report['price_subtotal']"/>
                                    </span>
                                </td>
                                <td style="text-align:center;">
                                    <span>
                                        <t t-esc="pos_report['price_subtotal_incl']"/>
                                    </span>
                                </td>
                            </tr>
                        </t>
                    </tbody>
                </table>
            </div>
        </div>

        <!--Report for product-->
        <div t-if="order.report_type == 'report_by_product'">
            <div class="table_main_view">
                <table cellspacing="0" width="100%">

                    <thead>
                        <tr class="table_pos_head">
                            <th>Category</th>
                            <th class="mon_fld">Product Code</th>
                            <th class="mon_fld">Product Name</th>
                            <th class="mon_fld">Qty</th>
                            <th class="mon_fld">Amount Total</th>
                            <th class="mon_fld">Amount Total Incl</th>
                        </tr>
                    </thead>

                    <tbody>
                        <!--                        <t t-if="order['report_type']='report_by_order'">-->
                        <t t-foreach="report_lines" t-as="pos_report">
                            <tr style="border: 1.5px solid black;" class="ps-line"
                                data-toggle="collapse"
                                t-att-data-account-id="pos_report['id']"
                                t-attf-data-target=".a{{pos_report['id']}}">
                                <td style="border: 0px solid black;">
                                    <i class="fa fa-caret-down" role="img" aria-label="Unfolded" title="Unfolded"/>

                                    <span>
                                        <t t-esc="pos_report['name']"/>
                                    </span>


                                </td>
                                <td style="text-align:center;">
                                    <span>
                                        <t t-esc="pos_report['default_code']"/>
                                    </span>
                                </td>
                                <td style="text-align:center;">
                                    <span>
                                        <t t-esc="pos_report['full_product_name']"/>
                                    </span>
                                </td>
                                <td style="text-align:center;">
                                    <span>
                                        <t t-esc="pos_report['qty']"/>
                                    </span>
                                </td>
                                <td style="text-align:center;">
                                    <span>
                                        <t t-esc="pos_report['amount_total']"/>
                                    </span>
                                </td>
                                <td style="text-align:center;">
                                    <span>
                                        <t t-esc="pos_report['amount_paid']"/>
                                    </span>
                                </td>
                            </tr>
                        </t>
                    </tbody>
                </table>
            </div>
        </div>
        <!--Report for Categories-->

        <div t-if="order.report_type == 'report_by_categories'">
            <div class="table_main_view">
                <table cellspacing="0" width="100%">

                    <thead>
                        <tr class="table_pos_head">
                            <th>Category</th>
                            <th class="mon_fld">Qty</th>
                            <th class="mon_fld">Amount Total</th>
                            <th class="mon_fld">Amount Total Incl</th>
                        </tr>
                    </thead>
                    <tbody>
                        <!--                        <t t-if="order['report_type']='report_by_order'">-->
                        <t t-foreach="report_lines" t-as="pos_report">
                            <tr style="border: 1.5px solid black;" class="ps-line"
                                data-toggle="collapse"
                                t-att-data-account-id="pos_report['id']"
                                t-attf-data-target=".a{{pos_report['id']}}">
                                <td style="border: 0px solid black;">
                                    <i class="fa fa-caret-down" role="img" aria-label="Unfolded" title="Unfolded"/>
                                    <span>
                                        <t t-esc="pos_report['name']"/>
                                    </span>
                                </td>
                                <td style="text-align:center;">
                                    <span>
                                        <t t-esc="pos_report['qty']"/>
                                    </span>
                                </td>
                                <td style="text-align:center;">
                                    <span>
                                        <t t-esc="pos_report['amount_total']"/>
                                    </span>
                                </td>
                                <td style="text-align:center;">
                                    <span>
                                        <t t-esc="pos_report['total_incl']"/>
                                    </span>
                                </td>
                            </tr>
                        </t>
                    </tbody>
                </table>
            </div>
        </div>
        <!--Report for Salesman-->

        <div t-if="order.report_type == 'report_by_salesman'">
            <div class="table_main_view">
                <table cellspacing="0" width="100%">

                    <thead>
                        <tr class="table_pos_head">
                            <th>Cashier</th>
                            <th class="mon_fld">Total Over</th>
 							<th class="mon_fld">Total Short</th>
							<th class="mon_fld">Total Difference</th>
                        </tr>
                    </thead>
                    <tbody>
                        <!--                        <t t-if="order['report_type']='report_by_order'">-->
						<t t-set="total_over_sum" t-value="0"/>
						<t t-set="total_short_sum" t-value="0"/>
                        <t t-set="total_diff_sum" t-value="0"/>
						<t t-foreach="report_lines" t-as="pos_report">
                            <tr style="border: 1.5px solid black;" class="ps-line"
                                data-toggle="collapse"
                                t-att-data-account-id="pos_report['id']"
                                t-attf-data-target=".a{{pos_report['id']}}">								
                                <td style="border: 0px solid black;">
                                    <i class="fa fa-caret-down" role="img" aria-label="Unfolded" title="Unfolded"/>
                                    <span>
                                        <t t-esc="pos_report['user']"/>
                                    </span>
                                </td>
                                <td style="text-align:center;">
                                    <span>
                                        <t t-esc="pos_report['total_over'].toFixed(2)"/>
                                    </span>
                                </td>
                                <td style="text-align:center;">
                                    <span>
                                        <t t-esc="pos_report['total_short'].toFixed(2)"/>
                                    </span>
                                </td>
                                <td style="text-align:center;">
                                    <span>
                                        <t t-esc="pos_report['total_diff'].toFixed(2)"/>
                                    </span>
                                </td>								
                            </tr>
							<t t-set="total_over_sum" t-value="total_over_sum + pos_report['total_over']" />
							<t t-set="total_short_sum" t-value="total_short_sum + pos_report['total_short']" />
							<t t-set="total_diff_sum" t-value="total_diff_sum + pos_report['total_diff']" />							
                        </t>
						<tr style="font-weight: bold;text-right">
							<td><strong>Total:</strong>
							<td style="text-align:center;"><t t-esc="total_over_sum.toFixed(2)"/></td>
							<td style="text-align:center;"><t t-esc="total_short_sum.toFixed(2)"/></td>
							<td style="text-align:center;"><t t-esc="total_diff_sum.toFixed(2)"/></td>
							</td>
						</tr>						
                    </tbody>
                </table>
            </div>
        </div>

        <!--Report for Payment-->

        <div t-if="order.report_type == 'report_by_payment'">
            <div class="table_main_view">
                <table cellspacing="0" width="100%">

                    <thead>
                        <tr class="table_pos_head">
                            <th>Point of Sale</th>
							<th class="mon_fld">Date</th>
                            <th class="mon_fld">PoS Session</th>
                            <th class="mon_fld">Cash</th>
							<th class="mon_fld">Bank</th>
							<th class="mon_fld">Card</th>							
							<th class="mon_fld">E-Wallet</th>							
                            <th class="mon_fld">Total Amount</th>
                        </tr>
                    </thead>
                    <tbody>
                        <!--                        <t t-if="order['report_type']='report_by_order'">-->
						<t t-foreach="report_lines" t-as="pos_report">
                            <tr style="border: 1.5px solid black;" class="ps-line"
                                data-toggle="collapse"
                                t-att-data-account-id="pos_report['id']"
                                t-attf-data-target=".a{{pos_report['id']}}">
                                <td style="border: 0px solid black;">
                                    <i class="fa fa-caret-down" role="img" aria-label="Unfolded" title="Unfolded"/>
                                    <span>
                                        <t t-esc="pos_report['config']"/>
                                    </span>
                                </td>
                                <td style="text-align:center;">
                                    <span>
                                        <t t-esc="pos_report['start_at']"/>
                                    </span>
                                </td>								
                                <td style="text-align:center;">
                                    <span>
                                        <t t-esc="pos_report['session']"/>
                                    </span>
                                </td>
                                <td style="text-align:center;">
                                    <span>
                                        <t t-esc="pos_report['cash'].toFixed(2)"/>
                                    </span>
                                </td>
                                <td style="text-align:center;">
                                    <span>
                                        <t t-esc="pos_report['bank'].toFixed(2)"/>
                                    </span>
                                </td>
                                <td style="text-align:center;">
                                    <span>
                                        <t t-esc="pos_report['card'].toFixed(2)"/>
                                    </span>
                                </td>
                                <td style="text-align:center;">
                                    <span>
                                        <t t-esc="pos_report['ewallet'].toFixed(2)"/>
                                    </span>
                                </td>								
                                <td style="text-align:center;">
                                    <span>
                                        <span t-esc="pos_report['sum'].toFixed(2)"/>
                                    </span>
                                </td>
                            </tr>
                        </t>
                    </tbody>
                </table>
            </div>
        </div>
    </t>
</templates>
